import axios from "axios";


const API = {
    //setting up dummy API to build virtual market
    getUser: function () {
        const d = new Date("2020-11-08")
        const dummyUser = {
            name: 'Logan Walker',
            portfolio: [
                {
                    stockId: 'IBM',
                    shares: 5,
                    initDate: d,
                    initPrice: 129.40,
                    currPrice: 114.44
                },
                {
                    stockId: 'AAPL',
                    shares: 5,
                    initDate: d,
                    initPrice: 117.40,
                    currPrice: 118.97
                },
                {
                    stockId: 'GOOG',
                    shares: 5,
                    initDate: d,
                    initPrice: 1777.44,
                    currPrice: 1777.44
                }
            ],
            funds: 1000,
            position: 1
        }

        return dummyUser;
    },

    // let portfolioSymbols = ["PG", "MSFT"];
    // console.log(API.getCurrentValues(portfolioSymbols))
    getCurrentValues: async (symbols) => {
        const response = await axios.get("/api/stock/currentValues", { params: { symbols: symbols } });
        let currentValues = {};
        for (let i = 0; i < response.data.length; i++) {
            if (response.data[i].hasOwnProperty("Global Quote")) { // response has one of these for each stock, with we haven't exceeded the api limit
                const globalQuote = response.data[i]["Global Quote"];
                currentValues[globalQuote["01. symbol"]] = response.data[i]["Global Quote"]["05. price"];
            }
        }
        return currentValues;
    },

    
    // use like this : console.log(API.searchForStocks("BIG")); - also works on corp names!
    // console.log(API.searchForStocks("microsoft"));
    searchForStocks: async (userInput) => { // returns an array of objects of the form [{symbol: "BIG", name: "Big Lots Inc."}, {symbol: "BIIG", name: "Somebody else"}]
        const response = await axios.get("/api/stock/search", {params: {symbol: userInput}});
        let searchMatches = [];
        for (let i = 0; i < response.data.length; i++) {
            console.log(response.data[i]);
            if(response.data[i].hasOwnProperty("1. symbol")) {
                searchMatches.push({
                    symbol: response.data[i]["1. symbol"],
                    name: response.data[i]["2. name"]
                })
            }
        }
        return searchMatches;
    },


    // API.getStockData("MSFT", 60).then(res => console.log(res));
    getStockData: async (symbol, interval) => { //symbol is like "IBM", interval is '1', '5', '15', '30', or '60' for those number of minutes
        // return axios.get("/api/stock", { params: { symbol: symbol, interval: interval } });
        let object = {
            "Meta Data": {
                "1. Information": "Intraday (5min) open, high, low, close prices and volume",
                "2. Symbol": "IBM",
                "3. Last Refreshed": "2020-11-11 19:45:00",
                "4. Interval": "5min",
                "5. Output Size": "Compact",
                "6. Time Zone": "US/Eastern"
            },
            "Time Series (5min)": {
                "2020-11-11 19:45:00": {
                    "1. open": "117.2000",
                    "2. high": "117.2000",
                    "3. low": "117.2000",
                    "4. close": "117.2000",
                    "5. volume": "976"
                },
                "2020-11-11 19:10:00": {
                    "1. open": "117.2500",
                    "2. high": "117.2500",
                    "3. low": "117.2500",
                    "4. close": "117.2500",
                    "5. volume": "100"
                },
                "2020-11-11 19:05:00": {
                    "1. open": "117.4700",
                    "2. high": "117.4900",
                    "3. low": "117.4700",
                    "4. close": "117.4900",
                    "5. volume": "3002"
                },
                "2020-11-11 18:55:00": {
                    "1. open": "117.1500",
                    "2. high": "117.1500",
                    "3. low": "117.1500",
                    "4. close": "117.1500",
                    "5. volume": "110"
                },
                "2020-11-11 18:05:00": {
                    "1. open": "117.2000",
                    "2. high": "117.2000",
                    "3. low": "117.2000",
                    "4. close": "117.2000",
                    "5. volume": "421"
                },
                "2020-11-11 18:00:00": {
                    "1. open": "117.3000",
                    "2. high": "117.3000",
                    "3. low": "117.3000",
                    "4. close": "117.3000",
                    "5. volume": "426"
                },
                "2020-11-11 16:45:00": {
                    "1. open": "117.2200",
                    "2. high": "117.2200",
                    "3. low": "117.2000",
                    "4. close": "117.2000",
                    "5. volume": "500"
                },
                "2020-11-11 16:40:00": {
                    "1. open": "117.2000",
                    "2. high": "117.5000",
                    "3. low": "117.2000",
                    "4. close": "117.5000",
                    "5. volume": "4888"
                },
                "2020-11-11 16:25:00": {
                    "1. open": "117.2117",
                    "2. high": "117.2117",
                    "3. low": "117.1800",
                    "4. close": "117.1800",
                    "5. volume": "804"
                },
                "2020-11-11 16:20:00": {
                    "1. open": "117.1800",
                    "2. high": "117.1800",
                    "3. low": "117.1800",
                    "4. close": "117.1800",
                    "5. volume": "300"
                },
                "2020-11-11 16:15:00": {
                    "1. open": "117.2600",
                    "2. high": "117.2600",
                    "3. low": "117.2600",
                    "4. close": "117.2600",
                    "5. volume": "100"
                },
                "2020-11-11 16:10:00": {
                    "1. open": "117.5000",
                    "2. high": "117.5000",
                    "3. low": "117.5000",
                    "4. close": "117.5000",
                    "5. volume": "342"
                },
                "2020-11-11 16:05:00": {
                    "1. open": "117.2000",
                    "2. high": "117.2800",
                    "3. low": "117.2000",
                    "4. close": "117.2800",
                    "5. volume": "48646"
                },
                "2020-11-11 16:00:00": {
                    "1. open": "117.0700",
                    "2. high": "117.2200",
                    "3. low": "117.0150",
                    "4. close": "117.2100",
                    "5. volume": "158688"
                },
                "2020-11-11 15:55:00": {
                    "1. open": "117.0600",
                    "2. high": "117.1700",
                    "3. low": "117.0350",
                    "4. close": "117.0700",
                    "5. volume": "80403"
                },
                "2020-11-11 15:50:00": {
                    "1. open": "116.8500",
                    "2. high": "117.0600",
                    "3. low": "116.7840",
                    "4. close": "117.0600",
                    "5. volume": "50524"
                },
                "2020-11-11 15:45:00": {
                    "1. open": "116.7800",
                    "2. high": "116.8800",
                    "3. low": "116.7100",
                    "4. close": "116.8700",
                    "5. volume": "41948"
                },
                "2020-11-11 15:40:00": {
                    "1. open": "116.6700",
                    "2. high": "116.8361",
                    "3. low": "116.6100",
                    "4. close": "116.7900",
                    "5. volume": "35796"
                },
                "2020-11-11 15:35:00": {
                    "1. open": "116.4900",
                    "2. high": "116.7799",
                    "3. low": "116.4700",
                    "4. close": "116.7000",
                    "5. volume": "44985"
                },
                "2020-11-11 15:30:00": {
                    "1. open": "116.8250",
                    "2. high": "116.8500",
                    "3. low": "116.4800",
                    "4. close": "116.4900",
                    "5. volume": "75027"
                },
                "2020-11-11 15:25:00": {
                    "1. open": "116.9600",
                    "2. high": "116.9600",
                    "3. low": "116.7400",
                    "4. close": "116.8300",
                    "5. volume": "39132"
                },
                "2020-11-11 15:20:00": {
                    "1. open": "116.9700",
                    "2. high": "116.9800",
                    "3. low": "116.8924",
                    "4. close": "116.9600",
                    "5. volume": "29927"
                },
                "2020-11-11 15:15:00": {
                    "1. open": "116.9900",
                    "2. high": "117.0600",
                    "3. low": "116.8800",
                    "4. close": "116.9700",
                    "5. volume": "35252"
                },
                "2020-11-11 15:10:00": {
                    "1. open": "116.9400",
                    "2. high": "117.0299",
                    "3. low": "116.8700",
                    "4. close": "116.9958",
                    "5. volume": "35783"
                },
                "2020-11-11 15:05:00": {
                    "1. open": "117.0200",
                    "2. high": "117.0600",
                    "3. low": "116.9400",
                    "4. close": "116.9400",
                    "5. volume": "40173"
                },
                "2020-11-11 15:00:00": {
                    "1. open": "116.7950",
                    "2. high": "117.0600",
                    "3. low": "116.7850",
                    "4. close": "117.0000",
                    "5. volume": "39280"
                },
                "2020-11-11 14:55:00": {
                    "1. open": "116.6700",
                    "2. high": "116.8400",
                    "3. low": "116.6300",
                    "4. close": "116.8057",
                    "5. volume": "34011"
                },
                "2020-11-11 14:50:00": {
                    "1. open": "117.0100",
                    "2. high": "117.0200",
                    "3. low": "116.6150",
                    "4. close": "116.6700",
                    "5. volume": "48227"
                },
                "2020-11-11 14:45:00": {
                    "1. open": "117.0000",
                    "2. high": "117.0100",
                    "3. low": "116.8700",
                    "4. close": "117.0084",
                    "5. volume": "34130"
                },
                "2020-11-11 14:40:00": {
                    "1. open": "117.0400",
                    "2. high": "117.1000",
                    "3. low": "116.9822",
                    "4. close": "117.0100",
                    "5. volume": "50265"
                },
                "2020-11-11 14:35:00": {
                    "1. open": "116.9900",
                    "2. high": "117.1200",
                    "3. low": "116.9522",
                    "4. close": "117.0600",
                    "5. volume": "32727"
                },
                "2020-11-11 14:30:00": {
                    "1. open": "117.0800",
                    "2. high": "117.0800",
                    "3. low": "116.9400",
                    "4. close": "116.9850",
                    "5. volume": "38961"
                },
                "2020-11-11 14:25:00": {
                    "1. open": "117.1100",
                    "2. high": "117.1900",
                    "3. low": "117.0200",
                    "4. close": "117.0800",
                    "5. volume": "36256"
                },
                "2020-11-11 14:20:00": {
                    "1. open": "117.2500",
                    "2. high": "117.2850",
                    "3. low": "117.0750",
                    "4. close": "117.1250",
                    "5. volume": "26270"
                },
                "2020-11-11 14:15:00": {
                    "1. open": "117.3750",
                    "2. high": "117.4000",
                    "3. low": "117.2600",
                    "4. close": "117.2600",
                    "5. volume": "30922"
                },
                "2020-11-11 14:10:00": {
                    "1. open": "117.5100",
                    "2. high": "117.5100",
                    "3. low": "117.3700",
                    "4. close": "117.4000",
                    "5. volume": "25201"
                },
                "2020-11-11 14:05:00": {
                    "1. open": "117.4400",
                    "2. high": "117.5600",
                    "3. low": "117.4350",
                    "4. close": "117.5150",
                    "5. volume": "23771"
                },
                "2020-11-11 14:00:00": {
                    "1. open": "117.6300",
                    "2. high": "117.6300",
                    "3. low": "117.4100",
                    "4. close": "117.4150",
                    "5. volume": "41640"
                },
                "2020-11-11 13:55:00": {
                    "1. open": "117.7400",
                    "2. high": "117.8000",
                    "3. low": "117.6100",
                    "4. close": "117.6235",
                    "5. volume": "36238"
                },
                "2020-11-11 13:50:00": {
                    "1. open": "117.8500",
                    "2. high": "117.8600",
                    "3. low": "117.7000",
                    "4. close": "117.7100",
                    "5. volume": "22924"
                },
                "2020-11-11 13:45:00": {
                    "1. open": "117.9200",
                    "2. high": "117.9500",
                    "3. low": "117.7900",
                    "4. close": "117.8300",
                    "5. volume": "33983"
                },
                "2020-11-11 13:40:00": {
                    "1. open": "117.7700",
                    "2. high": "117.9200",
                    "3. low": "117.7700",
                    "4. close": "117.9200",
                    "5. volume": "52969"
                },
                "2020-11-11 13:35:00": {
                    "1. open": "117.7000",
                    "2. high": "117.7822",
                    "3. low": "117.6501",
                    "4. close": "117.7700",
                    "5. volume": "26416"
                },
                "2020-11-11 13:30:00": {
                    "1. open": "117.6600",
                    "2. high": "117.7017",
                    "3. low": "117.5900",
                    "4. close": "117.7017",
                    "5. volume": "27856"
                },
                "2020-11-11 13:25:00": {
                    "1. open": "117.6100",
                    "2. high": "117.7400",
                    "3. low": "117.6100",
                    "4. close": "117.6600",
                    "5. volume": "24975"
                },
                "2020-11-11 13:20:00": {
                    "1. open": "117.5000",
                    "2. high": "117.6500",
                    "3. low": "117.4950",
                    "4. close": "117.6132",
                    "5. volume": "19572"
                },
                "2020-11-11 13:15:00": {
                    "1. open": "117.6300",
                    "2. high": "117.6300",
                    "3. low": "117.5200",
                    "4. close": "117.5200",
                    "5. volume": "16933"
                },
                "2020-11-11 13:10:00": {
                    "1. open": "117.6900",
                    "2. high": "117.7000",
                    "3. low": "117.6000",
                    "4. close": "117.6400",
                    "5. volume": "20702"
                },
                "2020-11-11 13:05:00": {
                    "1. open": "117.9200",
                    "2. high": "117.9200",
                    "3. low": "117.6948",
                    "4. close": "117.7200",
                    "5. volume": "42600"
                },
                "2020-11-11 13:00:00": {
                    "1. open": "117.6784",
                    "2. high": "117.9150",
                    "3. low": "117.6401",
                    "4. close": "117.9050",
                    "5. volume": "52736"
                },
                "2020-11-11 12:55:00": {
                    "1. open": "117.6401",
                    "2. high": "117.6800",
                    "3. low": "117.5600",
                    "4. close": "117.6600",
                    "5. volume": "20918"
                },
                "2020-11-11 12:50:00": {
                    "1. open": "117.5011",
                    "2. high": "117.6307",
                    "3. low": "117.4800",
                    "4. close": "117.6122",
                    "5. volume": "29827"
                },
                "2020-11-11 12:45:00": {
                    "1. open": "117.4300",
                    "2. high": "117.5600",
                    "3. low": "117.4100",
                    "4. close": "117.4950",
                    "5. volume": "29364"
                },
                "2020-11-11 12:40:00": {
                    "1. open": "117.4500",
                    "2. high": "117.4600",
                    "3. low": "117.3930",
                    "4. close": "117.4200",
                    "5. volume": "22929"
                },
                "2020-11-11 12:35:00": {
                    "1. open": "117.4400",
                    "2. high": "117.5000",
                    "3. low": "117.4100",
                    "4. close": "117.4500",
                    "5. volume": "31772"
                },
                "2020-11-11 12:30:00": {
                    "1. open": "117.3800",
                    "2. high": "117.5200",
                    "3. low": "117.3800",
                    "4. close": "117.4500",
                    "5. volume": "31470"
                },
                "2020-11-11 12:25:00": {
                    "1. open": "117.2400",
                    "2. high": "117.3900",
                    "3. low": "117.2300",
                    "4. close": "117.3803",
                    "5. volume": "31190"
                },
                "2020-11-11 12:20:00": {
                    "1. open": "117.0701",
                    "2. high": "117.2400",
                    "3. low": "117.0701",
                    "4. close": "117.2400",
                    "5. volume": "28031"
                },
                "2020-11-11 12:15:00": {
                    "1. open": "117.2200",
                    "2. high": "117.2200",
                    "3. low": "117.0800",
                    "4. close": "117.0950",
                    "5. volume": "21559"
                },
                "2020-11-11 12:10:00": {
                    "1. open": "117.1500",
                    "2. high": "117.2800",
                    "3. low": "117.0100",
                    "4. close": "117.2500",
                    "5. volume": "32011"
                },
                "2020-11-11 12:05:00": {
                    "1. open": "117.2750",
                    "2. high": "117.3145",
                    "3. low": "117.0900",
                    "4. close": "117.1400",
                    "5. volume": "35271"
                },
                "2020-11-11 12:00:00": {
                    "1. open": "117.3000",
                    "2. high": "117.3700",
                    "3. low": "117.2150",
                    "4. close": "117.2683",
                    "5. volume": "18255"
                },
                "2020-11-11 11:55:00": {
                    "1. open": "117.3400",
                    "2. high": "117.3800",
                    "3. low": "117.2101",
                    "4. close": "117.3000",
                    "5. volume": "33402"
                },
                "2020-11-11 11:50:00": {
                    "1. open": "117.4850",
                    "2. high": "117.5000",
                    "3. low": "117.3600",
                    "4. close": "117.3800",
                    "5. volume": "39649"
                },
                "2020-11-11 11:45:00": {
                    "1. open": "117.3850",
                    "2. high": "117.5400",
                    "3. low": "117.3850",
                    "4. close": "117.4800",
                    "5. volume": "37021"
                },
                "2020-11-11 11:40:00": {
                    "1. open": "117.4600",
                    "2. high": "117.4900",
                    "3. low": "117.3800",
                    "4. close": "117.3938",
                    "5. volume": "26897"
                },
                "2020-11-11 11:35:00": {
                    "1. open": "117.3100",
                    "2. high": "117.4600",
                    "3. low": "117.3000",
                    "4. close": "117.4600",
                    "5. volume": "31663"
                },
                "2020-11-11 11:30:00": {
                    "1. open": "117.2500",
                    "2. high": "117.3450",
                    "3. low": "117.1500",
                    "4. close": "117.3013",
                    "5. volume": "72427"
                },
                "2020-11-11 11:25:00": {
                    "1. open": "117.2500",
                    "2. high": "117.3100",
                    "3. low": "117.2000",
                    "4. close": "117.2400",
                    "5. volume": "43025"
                },
                "2020-11-11 11:20:00": {
                    "1. open": "117.1700",
                    "2. high": "117.2700",
                    "3. low": "117.1500",
                    "4. close": "117.2700",
                    "5. volume": "31177"
                },
                "2020-11-11 11:15:00": {
                    "1. open": "116.9799",
                    "2. high": "117.1900",
                    "3. low": "116.9000",
                    "4. close": "117.1600",
                    "5. volume": "24960"
                },
                "2020-11-11 11:10:00": {
                    "1. open": "116.9400",
                    "2. high": "117.0000",
                    "3. low": "116.8700",
                    "4. close": "116.9350",
                    "5. volume": "24055"
                },
                "2020-11-11 11:05:00": {
                    "1. open": "116.9200",
                    "2. high": "117.0500",
                    "3. low": "116.8600",
                    "4. close": "116.9600",
                    "5. volume": "32483"
                },
                "2020-11-11 11:00:00": {
                    "1. open": "116.7850",
                    "2. high": "116.9700",
                    "3. low": "116.7300",
                    "4. close": "116.9200",
                    "5. volume": "39871"
                },
                "2020-11-11 10:55:00": {
                    "1. open": "116.9203",
                    "2. high": "117.0200",
                    "3. low": "116.7300",
                    "4. close": "116.7600",
                    "5. volume": "30909"
                },
                "2020-11-11 10:50:00": {
                    "1. open": "116.8000",
                    "2. high": "117.0700",
                    "3. low": "116.8000",
                    "4. close": "116.9100",
                    "5. volume": "56216"
                },
                "2020-11-11 10:45:00": {
                    "1. open": "116.6800",
                    "2. high": "116.8300",
                    "3. low": "116.6600",
                    "4. close": "116.7750",
                    "5. volume": "35095"
                },
                "2020-11-11 10:40:00": {
                    "1. open": "116.8400",
                    "2. high": "116.8600",
                    "3. low": "116.6850",
                    "4. close": "116.6850",
                    "5. volume": "44709"
                },
                "2020-11-11 10:35:00": {
                    "1. open": "116.6100",
                    "2. high": "116.8399",
                    "3. low": "116.5800",
                    "4. close": "116.8130",
                    "5. volume": "57624"
                },
                "2020-11-11 10:30:00": {
                    "1. open": "116.4471",
                    "2. high": "116.6500",
                    "3. low": "116.4350",
                    "4. close": "116.5700",
                    "5. volume": "29231"
                },
                "2020-11-11 10:25:00": {
                    "1. open": "116.4300",
                    "2. high": "116.6200",
                    "3. low": "116.4100",
                    "4. close": "116.4336",
                    "5. volume": "52818"
                },
                "2020-11-11 10:20:00": {
                    "1. open": "116.3300",
                    "2. high": "116.4700",
                    "3. low": "116.2301",
                    "4. close": "116.4300",
                    "5. volume": "44998"
                },
                "2020-11-11 10:15:00": {
                    "1. open": "116.4258",
                    "2. high": "116.4700",
                    "3. low": "116.2200",
                    "4. close": "116.3200",
                    "5. volume": "62462"
                },
                "2020-11-11 10:10:00": {
                    "1. open": "116.6057",
                    "2. high": "116.7700",
                    "3. low": "116.4000",
                    "4. close": "116.4100",
                    "5. volume": "49287"
                },
                "2020-11-11 10:05:00": {
                    "1. open": "116.6650",
                    "2. high": "116.8000",
                    "3. low": "116.5500",
                    "4. close": "116.6200",
                    "5. volume": "55175"
                },
                "2020-11-11 10:00:00": {
                    "1. open": "116.7000",
                    "2. high": "116.7200",
                    "3. low": "116.3900",
                    "4. close": "116.6727",
                    "5. volume": "55118"
                },
                "2020-11-11 09:55:00": {
                    "1. open": "116.7500",
                    "2. high": "116.9500",
                    "3. low": "116.5300",
                    "4. close": "116.7200",
                    "5. volume": "47498"
                },
                "2020-11-11 09:50:00": {
                    "1. open": "116.4000",
                    "2. high": "118.2700",
                    "3. low": "116.4000",
                    "4. close": "116.8000",
                    "5. volume": "638505"
                },
                "2020-11-11 09:45:00": {
                    "1. open": "117.0321",
                    "2. high": "117.0600",
                    "3. low": "116.2875",
                    "4. close": "116.3900",
                    "5. volume": "58275"
                },
                "2020-11-11 09:40:00": {
                    "1. open": "117.6100",
                    "2. high": "117.6650",
                    "3. low": "116.7500",
                    "4. close": "117.0700",
                    "5. volume": "152071"
                },
                "2020-11-11 09:35:00": {
                    "1. open": "118.1200",
                    "2. high": "118.3500",
                    "3. low": "117.6300",
                    "4. close": "117.6600",
                    "5. volume": "241481"
                },
                "2020-11-11 09:30:00": {
                    "1. open": "118.2400",
                    "2. high": "118.2500",
                    "3. low": "118.2400",
                    "4. close": "118.2500",
                    "5. volume": "513"
                },
                "2020-11-11 09:20:00": {
                    "1. open": "118.2000",
                    "2. high": "118.2000",
                    "3. low": "118.2000",
                    "4. close": "118.2000",
                    "5. volume": "681"
                },
                "2020-11-11 09:15:00": {
                    "1. open": "118.2699",
                    "2. high": "118.2699",
                    "3. low": "118.1600",
                    "4. close": "118.1600",
                    "5. volume": "1122"
                },
                "2020-11-11 09:05:00": {
                    "1. open": "118.2000",
                    "2. high": "118.2000",
                    "3. low": "118.2000",
                    "4. close": "118.2000",
                    "5. volume": "218"
                },
                "2020-11-11 09:00:00": {
                    "1. open": "118.4000",
                    "2. high": "118.4000",
                    "3. low": "118.4000",
                    "4. close": "118.4000",
                    "5. volume": "105"
                },
                "2020-11-11 08:55:00": {
                    "1. open": "118.2100",
                    "2. high": "118.2102",
                    "3. low": "118.2100",
                    "4. close": "118.2102",
                    "5. volume": "1070"
                },
                "2020-11-11 08:50:00": {
                    "1. open": "118.2501",
                    "2. high": "118.2501",
                    "3. low": "118.2500",
                    "4. close": "118.2500",
                    "5. volume": "304"
                },
                "2020-11-11 08:45:00": {
                    "1. open": "118.3000",
                    "2. high": "118.3000",
                    "3. low": "118.3000",
                    "4. close": "118.3000",
                    "5. volume": "150"
                },
                "2020-11-11 08:40:00": {
                    "1. open": "118.3200",
                    "2. high": "118.3200",
                    "3. low": "118.3100",
                    "4. close": "118.3100",
                    "5. volume": "355"
                }
            }
        }
        return object
    }
};

export default API;